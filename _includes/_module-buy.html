<!-- Load Stripe.js on your website. -->
<script src="https://js.stripe.com/v3"></script>
<section id="buy" class="ui segment unstackable items">
  <div class="item" style="margin-bottom:0">
    <div class="image">
      <img src="/uploads/2020/07/cap-1.png" alt="">
    </div>
    <div class="content">
      <div class="header">WOOF Luxembourg Cap</div>
      <div class="meta">
        <span class="price">25€ <del>30€</del> (+ shipping)</span>
      </div>
      <div class="description">For the anniversary of Woof Luxembourg, the men-only party, we decided to release a small batch of high quality cap with 3D embroised logo on it.</div>
      <div class="extra">
        <button class="ui right floated brown button" id="checkout-button-price_1H73Lm2EsI6YBHZn80MuYdJE" role="link">
          Buy it
          <i class="right chevron icon"></i>
        </button>
        <div class="ui mini label">Limited Edition</div>
      </div>
    </div>
  </div>
  <div id="error-message"></div>
  <script>
  (function() {
    var stripe = Stripe('pk_live_JaB4dZhVh2aJqFDed52kggEv');

    var checkoutButton = document.getElementById('checkout-button-price_1H73Lm2EsI6YBHZn80MuYdJE');
    checkoutButton.addEventListener('click', function () {
      // When the customer clicks on the button, redirect
      // them to Checkout.
      stripe.redirectToCheckout({
        lineItems: [{price: 'price_1H73Lm2EsI6YBHZn80MuYdJE', quantity: 1}],
        mode: 'payment',
        // Do not rely on the redirect to the successUrl for fulfilling
        // purchases, customers may not always reach the success_url after
        // a successful payment.
        // Instead use one of the strategies described in
        // https://stripe.com/docs/payments/checkout/fulfillment
        successUrl: 'https://bears.lu/payment/success/',
        cancelUrl: 'https://bears.lu/payment/cancelled/',
      })
      .then(function (result) {
        if (result.error) {
          // If `redirectToCheckout` fails due to a browser or network
          // error, display the localized error message to your customer.
          var displayError = document.getElementById('error-message');
          displayError.textContent = result.error.message;
        }
      });
    });
  })();
  </script>
</section>
